<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>编辑活动-{cfg:(site_title,sys)}</title>
<meta name="keywords" content="{cfg:(keywords,sys)}"/>
<meta name="description" content="{cfg:(description,sys)}"/>
<link rel="stylesheet" type="text/css" href="/common/images/common.css"/>
<link rel="stylesheet" type="text/css" href="images/css.css"/>
<script src="{cfg:(dirpath,base)}/common.php?app=sys&app_act=web.config&app_ajax=1"></script>
<script src="/common/js/kj.js"></script>
<script src="/common/js/kj.ajax.js"></script>
<script src="/common/js/kj.dialog.js"></script>
<script src="/common/js/kj.rule.js"></script>
<script src="/common/js/date.js"></script>
<style>
.me_pic{float:left;width:95%}
.me_pic li{float:left;width:95%;text-align:left;line-height:30px;margin:10px 0px 5px 0px}
.me_pic .x1{float:left;width:450px}
.me_pic .x2{float:left;width:100px}
.me_pic .x2 img{width:60px;height:60px}
.me_picbtn{float:left;width:95%;text-align:left}
</style>
</head>
<body>
{include(shop.header)}
<div class="pMenu" id="id_pMenu" style="width:100%">
	<li class="sel" onclick="shop.edittabel(0);">基本信息</li>
</div>
<div class="pMain" id="id_main">
<input type="hidden" name="act_where_val" value="">
<input type="hidden" name="act_method_val" value="">
<table class='pEditTable'>
<tr class='pTabTitRow'><td class='pTabTitCol' colspan="2"></td></tr>
<tr>
	<td class="pTabColName">主题描述：</td><td class="pTabColVal"><input type="text" name="act_name" value="{$editinfo['act_name']}" class='pTxt1 pTxtL300'></td>
	</tr>
<tr>
	<td class="pTabColName">开始时间：</td><td class="pTabColVal"><input type="text" name="act_starttime" value="{$editinfo['act_starttime']}" class='pTxt1 pTxtL150' onfocus="new Calendar().show(this);"></td>
	</tr>
<tr>
	<td class="pTabColName">结束时间：</td><td class="pTabColVal"><input type="text" name="act_endtime" value="{$editinfo['act_endtime']}" class='pTxt1 pTxtL150' onfocus="new Calendar().show(this);"></td>
	</tr>
<tr>
	<td class="pTabColName">条 件：</td>
	<td class="pTabColVal">
		<select name="act_where" onchange="thisjs.act_where(this.value);">
		{foreach($arr_where as $item=>$key)}
			<option value="{$key}"{if($key==$editinfo['act_where'])} selected{/if}>{$item}</option>
		{/foreach}
		</select><br><br>
		<span id="id_where_1" style="display:none"><input type="text" name="act_where_val_1" value="{if($editinfo['act_where']=='1')}{$editinfo['act_where_val']}{/if}" class='pTxt1 pTxtL60'>&nbsp;￥</span>
		<span id="id_where_2" style="display:none">
		<select name="act_where_val_2_1">
		{for($i=8;$i<24;$i++)}
		<option value="{$i}00"{if(isset($editinfo['act_where_val1']) && $editinfo['act_where_val1']==$i*100)} selected{/if}>{$i}:00</option>
		<option value="{$i}30"{if(isset($editinfo['act_where_val1']) && $editinfo['act_where_val1']==($i*100+30))} selected{/if}>{$i}:30</option>
		{/for}
		</select> 到 <select name="act_where_val_2_2">
		{for($i=8;$i<24;$i++)}
		<option value="{$i}00"{if(isset($editinfo['act_where_val2']) && $editinfo['act_where_val2']==$i*100)} selected{/if}>{$i}:00</option>
		<option value="{$i}30"{if(isset($editinfo['act_where_val2']) && $editinfo['act_where_val2']==($i*100+30))} selected{/if}>{$i}:30</option>
		{/for}
		</select>
		</span>
		<span id="id_where_3" style="display:none"><input type="text" name="act_where_val_3" value="{if($editinfo['act_where']=='3')}{$editinfo['act_where_val']}{/if}" class='pTxt1 pTxtL60'>&nbsp;份</span>
		<span id="id_where_4" style="display:none">
		<select name="act_where_val_4_1">
		{for($i=8;$i<24;$i++)}
		<option value="{$i}00"{if(isset($editinfo['act_where_val1']) && $editinfo['act_where_val1']==$i*100)} selected{/if}>{$i}:00</option>
		<option value="{$i}30"{if(isset($editinfo['act_where_val1']) && $editinfo['act_where_val1']==($i*100+30))} selected{/if}>{$i}:30</option>
		{/for}
		</select> 到 <select name="act_where_val_4_2">
		{for($i=8;$i<24;$i++)}
		<option value="{$i}00"{if(isset($editinfo['act_where_val2']) && $editinfo['act_where_val2']==$i*100)} selected{/if}>{$i}:00</option>
		<option value="{$i}30"{if(isset($editinfo['act_where_val2']) && $editinfo['act_where_val2']==($i*100+30))} selected{/if}>{$i}:30</option>
		{/for}
		</select>
		&nbsp;&nbsp;<input type="text" name="act_where_val_4_3" value="{if($editinfo['act_where']=='4')}{$editinfo['act_where_val3']}{/if}" class='pTxt1 pTxtL60'>&nbsp;份
		</span>
	</td></tr>
<tr>
	<td class="pTabColName">优 惠：</td>
	<td class="pTabColVal">
		<select name="act_method" onchange="thisjs.act_method(this.value);">
		{foreach($arr_method as $item=>$key)}
			<option value="{$key}"{if($key==$editinfo['act_method'])} selected{/if}>{$item}</option>
		{/foreach}
		</select><br><br>
		<span id="id_method_1" style="display:none"><input type="text" name="act_method_val_1" value="{if($editinfo['act_method']=='1')}{$editinfo['act_method_val']}{/if}" class='pTxt1 pTxtL200'></span>
		<span id="id_method_2" style="display:none"><input type="text" name="act_method_val_2" value="{if($editinfo['act_method']=='2')}{$editinfo['act_method_val']}{/if}" class='pTxt1 pTxtL60'>&nbsp;折</span>
		<span id="id_method_3" style="display:none"><input type="text" name="act_method_val_3" value="{if($editinfo['act_method']=='3')}{$editinfo['act_method_val']}{/if}" class='pTxt1 pTxtL60'>&nbsp;分</span>
		<span id="id_method_4" style="display:none"><input type="text" name="act_method_val_4" value="{if($editinfo['act_method']=='4')}{$editinfo['act_method_val']}{/if}" class='pTxt1 pTxtL60'>&nbsp;倍</span>
		<span id="id_method_5" style="display:none"><input type="text" name="act_method_val_5" value="{if($editinfo['act_method']=='5')}{$editinfo['act_method_val']}{/if}" class='pTxt1 pTxtL60'>&nbsp;￥</span>
		<span id="id_method_6" style="display:none"><input type="text" name="act_method_val_6" value="{if($editinfo['act_method']=='6')}{$editinfo['act_method_val']}{/if}" class='pTxt1 pTxtL60'>&nbsp;￥</span>
	</td></tr>
<tr>
	<td class="pTabColName">状 态：</td>
	<td class="pTabColVal">
		<select name="act_state">
		{foreach($arr_state as $item=>$key)}
			<option value="{$key}"{if($key==$editinfo['act_state'])} selected{/if}>{$item}</option>
		{/foreach}
		</select>
	</td></tr>
<tr>
	<td class="pTabColName">备注：</td><td class="pTabColVal"><textarea cols="50" rows="5" name="act_beta" class='pTxt1'>{$editinfo['act_beta']}</textarea></td>
	</tr>

</table>
</div>
<div class="peFootAct" id="id_pFootAct">
	<li>
	<input type="button" name="dosubmit" value="保存" onclick="thisjs.save();" class="btn-1">
	</li>
</div>
{include(shop.footer)}
<script>
var thisjs = new function() {
	this.act_where = function(val) {
		(val == '1')? kj.show('#id_where_1') : kj.hide('#id_where_1');
		(val == '2')? kj.show('#id_where_2') : kj.hide('#id_where_2');
		(val == '3')? kj.show('#id_where_3') : kj.hide('#id_where_3');
		(val == '4')? kj.show('#id_where_4') : kj.hide('#id_where_4');
	}
	this.act_method = function(val) {
		(val == '1')? kj.show('#id_method_1') : kj.hide('#id_method_1');
		(val == '2')? kj.show('#id_method_2') : kj.hide('#id_method_2');
		(val == '3')? kj.show('#id_method_3') : kj.hide('#id_method_3');
		(val == '4')? kj.show('#id_method_4') : kj.hide('#id_method_4');
		(val == '5')? kj.show('#id_method_5') : kj.hide('#id_method_5');
		(val == '6')? kj.show('#id_method_6') : kj.hide('#id_method_6');
	}
	this.save = function() {
		var where = document.frm_main.act_where.value;
		var method = document.frm_main.act_method.value;
		if(where == 2) {
			//指定时间，用逗号分隔
			document.frm_main.act_where_val.value = document.frm_main.act_where_val_2_1.value+","+ document.frm_main.act_where_val_2_2.value;
		} else if(where == 4) {
			document.frm_main.act_where_val.value = document.frm_main.act_where_val_4_1.value+","+ document.frm_main.act_where_val_4_2.value+","+ document.frm_main.act_where_val_4_3.value;
		} else if(where == 5) {
			document.frm_main.act_where_val.value = '';
		} else {
			document.frm_main.act_where_val.value = document.frm_main['act_where_val_'+where].value;
		}
		document.frm_main.act_method_val.value = kj.obj("#id_method_" + method) ? document.frm_main['act_method_val_'+method].value : '';
		shop.frm_ajax('save');
	}
}
kj.onload(function(){
	thisjs.act_where(document.frm_main.act_where.value);
	thisjs.act_method(document.frm_main.act_method.value);
});
</script>
</body>
</html>
<script src="/common/js/kj.pic.js"></script>
<script src="/common/js/kj.alert.js"></script>
<script src="shop.js"></script>